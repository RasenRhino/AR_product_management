{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VerticalImage = void 0;\n\nconst canvas_1 = require(\"canvas\");\n\nconst BaseClass_1 = require(\"./BaseClass\");\n\nconst canvas_2 = require(\"./utils/canvas\");\n\nclass VerticalImage extends BaseClass_1.BaseClass {\n  constructor(ultimateTextToImages, options = {}, renderOptions = {}) {\n    super();\n    this.ultimateTextToImages = ultimateTextToImages;\n    this.options = options;\n    this.renderOptions = renderOptions;\n  }\n\n  render() {\n    this._startTimer();\n\n    const {\n      backgroundColor\n    } = this.options;\n    const margin = this.options.margin || 0;\n\n    for (const ultimateTextToImage of this.ultimateTextToImages) {\n      ultimateTextToImage.render();\n    }\n\n    const width = this.ultimateTextToImages.reduce((a, b) => Math.max(a, b.width), 0) + margin * 2;\n    const height = this.ultimateTextToImages.reduce((a, b) => a + b.height, 0) + margin * 2;\n    this._canvas = new canvas_1.Canvas(width, height);\n\n    const ctx = this._canvas.getContext(\"2d\"); // hook\n\n\n    canvas_2.renderHook(this._canvas, this.renderOptions.preRender); // draw background\n\n    canvas_2.drawBackgroundColor(ctx, {\n      color: backgroundColor\n    });\n    let x = 0;\n    let y = margin;\n\n    for (const ultimateTextToImage of this.ultimateTextToImages) {\n      let align = this.options.align;\n\n      if (ultimateTextToImage.options.nestedAlign) {\n        align = ultimateTextToImage.options.nestedAlign;\n      }\n\n      if (align === \"right\") {\n        x = width - ultimateTextToImage.width - margin;\n      } else if (align === \"center\") {\n        x = (width - ultimateTextToImage.width) / 2;\n      } else {\n        x = margin;\n      }\n\n      ctx.drawImage(ultimateTextToImage.canvas, x, y);\n      y += ultimateTextToImage.height;\n    } // hook\n\n\n    canvas_2.renderHook(this._canvas, this.renderOptions.posRender);\n\n    this._endTimer();\n\n    return this;\n  }\n\n}\n\nexports.VerticalImage = VerticalImage;","map":{"version":3,"names":["Object","defineProperty","exports","value","VerticalImage","canvas_1","require","BaseClass_1","canvas_2","BaseClass","constructor","ultimateTextToImages","options","renderOptions","render","_startTimer","backgroundColor","margin","ultimateTextToImage","width","reduce","a","b","Math","max","height","_canvas","Canvas","ctx","getContext","renderHook","preRender","drawBackgroundColor","color","x","y","align","nestedAlign","drawImage","canvas","posRender","_endTimer"],"sources":["/mnt/r/flipkart/product_management/adminportal/node_modules/ultimate-text-to-image/build/VerticalImage.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VerticalImage = void 0;\nconst canvas_1 = require(\"canvas\");\nconst BaseClass_1 = require(\"./BaseClass\");\nconst canvas_2 = require(\"./utils/canvas\");\nclass VerticalImage extends BaseClass_1.BaseClass {\n    constructor(ultimateTextToImages, options = {}, renderOptions = {}) {\n        super();\n        this.ultimateTextToImages = ultimateTextToImages;\n        this.options = options;\n        this.renderOptions = renderOptions;\n    }\n    render() {\n        this._startTimer();\n        const { backgroundColor } = this.options;\n        const margin = this.options.margin || 0;\n        for (const ultimateTextToImage of this.ultimateTextToImages) {\n            ultimateTextToImage.render();\n        }\n        const width = this.ultimateTextToImages\n            .reduce((a, b) => Math.max(a, b.width), 0) + margin * 2;\n        const height = this.ultimateTextToImages.reduce((a, b) => a + b.height, 0) + margin * 2;\n        this._canvas = new canvas_1.Canvas(width, height);\n        const ctx = this._canvas.getContext(\"2d\");\n        // hook\n        canvas_2.renderHook(this._canvas, this.renderOptions.preRender);\n        // draw background\n        canvas_2.drawBackgroundColor(ctx, { color: backgroundColor });\n        let x = 0;\n        let y = margin;\n        for (const ultimateTextToImage of this.ultimateTextToImages) {\n            let align = this.options.align;\n            if (ultimateTextToImage.options.nestedAlign) {\n                align = ultimateTextToImage.options.nestedAlign;\n            }\n            if (align === \"right\") {\n                x = width - ultimateTextToImage.width - margin;\n            }\n            else if (align === \"center\") {\n                x = (width - ultimateTextToImage.width) / 2;\n            }\n            else {\n                x = margin;\n            }\n            ctx.drawImage(ultimateTextToImage.canvas, x, y);\n            y += ultimateTextToImage.height;\n        }\n        // hook\n        canvas_2.renderHook(this._canvas, this.renderOptions.posRender);\n        this._endTimer();\n        return this;\n    }\n}\nexports.VerticalImage = VerticalImage;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}